<div class="container my-5">

  <!-- Geri Tuşu -->
  <button class="btn btn-outline-secondary position-absolute top-0 start-0 mt-2 ms-2" (click)="goBack()">
    <i class="fa fa-arrow-left"></i> Geri
  </button>

  <h2 class="text-center mb-4">📸 Fotoğraflı Doğrulama</h2>

  @if (mission){
    <div class="card mb-4 shadow-sm p-3">
      <h5 class="mb-2 text-primary">📋 Görev Bilgileri</h5>
      <p><strong>Başlık:</strong> {{mission.missionTitle}}</p>
      <p><strong>Açıklama:</strong> {{mission.missionDescription}}</p>
      <p><strong>Toplam Kazanacağın Süre:</strong> {{mission.sessionDuration}} dk</p>
    </div>
  }


  <!-- Fotoğraf yükleme -->
  <div class="card shadow p-4 mb-4">
    <h5>Fotoğraf Yükle veya Kameradan Çek</h5>

    <!-- Galeriden seçme -->
    <input type="file" accept="image/*" class="form-control mt-2" (change)="onFileSelected($event)" />

    <!-- Kamerayı aç -->
    <button class="btn btn-outline-primary mt-3" (click)="openCamera()">📷 Kamerayı Aç</button>

    <!-- Canlı Kamera -->
    @if (cameraOpen) {
      <div  class="mt-3 text-center">
        <video #video autoplay class="border rounded" width="100%"></video>
        <br />
        <button class="btn btn-success mt-3" (click)="capturePhoto()">📸 Fotoğraf Çek</button>
        <button class="btn btn-danger mt-3" (click)="closeCamera()">❌ Kamerayı Kapat</button>
      </div>
    }


    <!-- Çekilmiş veya seçilmiş fotoğraf -->
    @if (previewUrl) {
      <div class="mt-4 text-center">
        <img [src]="previewUrl" class="img-fluid rounded shadow-sm" alt="Seçilen Fotoğraf" style="max-height: 300px;" />
      </div>
    }

  </div>

  <!-- Açıklama alanı -->
  <div class="card shadow p-4 mb-4">
    <h5>Açıklama</h5>
    <textarea [(ngModel)]="description" rows="4" class="form-control" placeholder="Açıklama yaz..."></textarea>
  </div>

  <!-- Gönder -->
  <div class="text-center">
    <button class="btn btn-success px-5 py-2" (click)="submit()">✔️ Gönder</button>
  </div>
</div>
